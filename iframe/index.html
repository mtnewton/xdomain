<html>

<script>
    (function(window){

        //function from https://www.w3schools.com/js/js_cookies.asp
        function getCookie(cname) {
            var name = cname + "=";
            var decodedCookie = decodeURIComponent(document.cookie);
            var ca = decodedCookie.split(';');
            for(var i = 0; i <ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                }
                if (c.indexOf(name) == 0) {
                    return c.substring(name.length, c.length);
                }
            }
            return "";
        }

        // check cookie for value. generate a value if not set.
        let rand = getCookie('rand')
        if (!rand) {
            rand = Math.floor(Math.random() * 1000);
            document.cookie = "rand=" + rand; 
        }

        // send the random value to the parent window
        window.parent.postMessage({'rand': rand}, '*')


    })(window)
</script>
</html>